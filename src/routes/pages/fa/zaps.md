---
title: زَپ چیست؟
description: بیاموزید زَپ چیست، چطور کار می کند، و برای استفاده از آن در کلاینت ناستر خود به چه چیز نیاز دارید؟
---

## [§](#مفاهیم-پایه) مفاهیم پایه
ساده ترین راه برای فکر کردن درباره زَپ مانند یک انعام است. انعام از طریق [شبکه لایتنینگ](https://www.investopedia.com/terms/l/lightning-network.asp) با سرعت نور و عملا بدون کارمزد تراکنش گذر داده می شوند. 

از ابتدای پروتکل ناستر، دیدن صورت حساب لایتنینگ در یادداشت ها معمول بود. از وقتی [NIP-57](https://github.com/nostr-protocol/nips/blob/master/57.md) به اجرا درآمد، زپ تبدیل به روش اصلی انتقال ارزش در یادداشت های ناستر شده است. بیایید نگاه دقیق تری به آنچه NIP-57 اجرا کرده و طرز کار زپ بیندازیم.     

## [§](#nip-57) سند NIP-57

[نیپ-57 NIP-57](https://github.com/nostr-protocol/nips/blob/master/57.md) سندی است که نحوه اجرای زپ را توضیح می دهد. این روش دو نوع یادداشت جدید ایجاد می کند، نوع 9735 (یک زپ) و نوع 9734 (یک درخواست زپ). این دو نوع با هم کلاینت ناستر را قادر می کنند تا از سرور  درخواست صدور صورت حساب لایتنینگ کرده و آن را پرداخت کند. NIP-57 همچنین توضیح می دهد که کیف پول لایتنینگی که پرداخت زپ دریافت می کند چگونه باید یادداشتی برای ارسال به رله ها ایجاد کند.   

💡 نکته جالب، نوع یادداشتی که برای زپ انتخاب شده همان درگاه شبکه (9735) است که لایتنینگ استفاده می کند. 

## [§](#زپ-چگونه-کار-میکند) زپ چگونه کار میکند  

[نمودار جریان زپ](/images/zap-flow.webp)!

در اینجا وارد عمق مطالب فنی نمی شویم ولی به خاطر بعضی اذهان کنجکاو در میان شما، بیایید نگاهی داشته باشیم به مکانیک پایه طرز کار زپ.


1.  وقتی در کلاینت خود (داموس، آیریس، اماتیست و غیره) روی علامت ⚡ کوچولو می زنید یا کلیک می کنید، اولین اتفاقی که می افتد این است که کلاینت به [سرور LNURL](https://thebitcoinmanual.com/articles/what-is-ln-url-and-how-does-it-work/) که جلوی کیف پول لایتنینگی که می خواهید به آن زپ بزنید قرار دارد، پینگ می فرستد. اولین درخواست چیزی مثل این است: "سلام، من می خواهم به آلیس مقداری ساتوشی بدهم". 
2.  سرور LNURL پاسخ می دهد و اگر کیف پول آلیس از زپ پشتیبانی کند، به کلاینت می گوید و کلید عمومی آلیس را تایید کرده و می فرستد. 
3.  در این هنگام، کلاینت کمی کار می کند تا یک درخواست زپ (یک یادداشت نوع 9734) را با داده هایی درباره نمایه یا یادداشتی که می خواهد زپ بزند، مبلغ زپ، رله هایی که باید یادداشت را عبور دهند، و چند چیز دیگر سر هم کند. این عملا یک صورت حساب لایتنینگ از سرور LNURL است. 
4. سرور LNURL در جواب صورت حساب لایتنینگی خواسته شده را می فرستد.
6. در این زمان، کلاینت صورت حساب را به کیف پول لایتنینگی می دهد تا بپردازد. اگر از کیف پولی مانند البی در مرورگر استفاده می کنید (و بودجه ای تعیین کرده اید) این فرایند می تواند خیلی سریع اتفاق بیفتد. 
7. به محض آنکه کاربر صورت حساب را مستقیما به کیف پول گیرنده زپ پرداخت کند، کیف پول دریافت کننده یادداشت نوع 9735 می سازد و سپس به رله هایی که از قبل در درخواست زپ مشخص شده اند می فرستد.
8. سپس رله هایی که این یادداشت را می گیرند می توانند به کلاینت های متصل خود درباره زپ اطلاع دهند و کلاینت ها زپ را به کاربران خود در رابط کاربری نشان می دهند. 

و تمام اینها در چند لحظه اتفاق می افتد و فقط ذره ناچیزی هزینه دارد.

## [§](#چطور-بفرستیم-و-دریافت-کنیم) چطور زپ بفرستیم و دریافت کنیم؟

برای زپ کردن دیگران در ناستر فقط به دو چیز لازم دارید:

1. یک کیف پول لایتنینگی سازگار با زپ (مثل [البی](https://getalby.com/) یا [کیف ساتوشی](https://www.walletofsatoshi.com/))
2. کلاینتی که زپ را به اجرا درآورده است (مثل [داموس](/fa/guides/damus)، [اماتیست](/fa/guides/amethyst)، [آیریس](/fa/guides/iris) یا [اسنورت](https://snort.social))

تنها چیز دیگری که نیاز دارید این است که آدرس لایتنینگی خود را در نمایه تان تنظیم کرده باشید. این آدرسی است که با آن دریافت می کنید.
در نظر داشته باشید ارسال زپ از آدرس و کیف پولی غیر از آنکه برای دریافت زپ در نمایه خود تعیین کرده اید ممکن است.

برای مثال این شرایط را در نظر بگیرید:

1. شما آدرس لایتنینگی [استکرنیوز](https://stacker.news/) در نمایه ناستر خود دارید، اینجا جایی است که ساتوشی هایی که برای شما زپ شده دریافت می کنید. 
2. در مرورگر خود، از آیریس به عنوان کلاینتتان استفاده می کنید و با استفاده از کیف پول البی از طریق افزونه کروم آن، زپ ها را پرداخت می کنید. 
3. در موبایل، از داموس به عنوان کلاینت خود استفاده می کنید و زپ ها را با استفاده از اپلیکیشن کیف پول ساتوشی پرداخت می کنید.
